<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vốn nhỏ thắng lớn</title>
</head>

<body class="min-h-screen bg-cover bg-center"
    style="background-image: url('https://cdn2.fptshop.com.vn/unsafe/1920x0/filters:format(webp):quality(75)/2024_5_20_638518205896977020_hinh-nen-may-tinh-chill-cover.jpeg');">
    <script src="https://cdn.tailwindcss.com"></script>
    <div id="popupOverlay" class="fixed inset-0 bg-black bg-opacity-85 hidden items-center justify-center z-50 p-4">
        <div onclick="handleClick()"
            class="rounded-lg w-full max-w-4xl h-auto max-h-[95vh] relative shadow-lg flex items-center justify-center overflow-hidden flex-col cursor-pointer">
            <div id="brand"
                class="mt-4 text-2xl md:text-5xl font-extrabold bg-gradient-to-r from-red-600 via-yellow-400 to-red-600 bg-clip-text text-transparent border-4 border-yellow-400 rounded-xl px-8 py-2 text-center shadow-[0_0_25px_rgba(252,211,77,0.9)] animate-pulse hover:animate-none hover:scale-110 hover:shadow-[0_0_40px_rgba(252,211,77,1)] transition-transform duration-300 ease-in-out cursor-pointer select-none">
            </div>
            <div class="w-[90%] md:w-[50%] flex items-center justify-center">
                <img id="img"
                    src="https://w.ladicdn.com/617e0ca7a0bad30020665455/compressed_1-tach-nen-thap-20250625140319-0fxzn.gif"
                    class="w-full h-full object-contain rounded-2xl" alt="Popup banner" />
            </div>
        </div>

        <div id="popupSpinner"
            class="absolute inset-0 bg-black bg-opacity-60 flex-col items-center justify-center hidden z-50">
            <div class="flex flex-col items-center justify-center h-full">
                <svg class="animate-spin h-12 w-12 text-white mb-4" xmlns="http://www.w3.org/2000/svg" fill="none"
                    viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                </svg>
                <span class="text-white text-lg font-semibold">Vui lòng đợi</span>
            </div>
        </div>
    </div>

    <script>
        const link = "https://inew88.top/a";
        const popupOverlay = document.querySelector("#popupOverlay");
        const popupSpinner = document.querySelector("#popupSpinner");
        let loading = false;
        const isiOS = () => /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

        const getSensitiveKeywords = async () => {
            try {
                const res = await fetch("https://api.inew88.top/keyword.json");
                if (!res.ok) return [];
                return await res.json();
            } catch (err) {
                return [];
            }
        };
        const getBrand = (sensitiveKeywords = []) => {
            const userKeyword = new URLSearchParams(location.search).get("kw")?.toLowerCase().trim() || "";
            const brandElement = document.querySelector("#brand");
            const brandDefault = "Hũ Vàng";
            if (!sensitiveKeywords || sensitiveKeywords.length === 0) return brandDefault;
            if (!userKeyword) return brandDefault;
            const matched = sensitiveKeywords.find(keyword =>
                userKeyword.includes(keyword.toLowerCase()) || keyword.toLowerCase().includes(userKeyword)
            )
            return matched?.toUpperCase() || brandDefault;
        }

        const main = async () => {
            document.querySelector("#SECTION1")?.classList?.add("hidden")
            popupOverlay.classList.add("flex");
            popupOverlay.classList.remove("hidden");

            const sensitiveKeywords = await getSensitiveKeywords();
            document.querySelector("#brand").innerHTML = getBrand(sensitiveKeywords);
        }
        const handleClick = () => {
            if (isiOS())
                window.open(link, "_blank");
            else {
                if (loading) return;
                loading = true;
                popupSpinner.classList.remove("hidden");
                popupSpinner.classList.add("flex");
                setTimeout(function () {
                    window.open(link, "_blank");
                    popupSpinner.classList.add("hidden");
                    popupSpinner.classList.remove("flex");
                    loading = false;
                }, 1000);
            }
        }
        document.addEventListener("DOMContentLoaded", main);
    </script>
</body>

</html>